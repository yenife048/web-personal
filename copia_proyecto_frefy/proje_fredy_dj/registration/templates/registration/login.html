{% extends 'core/base.html'%}

{% load static %}
<title>{% block title %} LOGIN {%endblock%}</title>

{% block background %}{% static 'core/img/login.jpg' %}{% endblock %}

{% block headers %}
    <h1>lOGIN</h1>
{% endblock %}

<!--aqui va el contenido-->
{% block content%}
<style>.errorlist{color:red;}</style>
<main role="main">
  <div class="container">
    <div class="row">
      <div class="col-md-9 mx-auto mb-5">
        {% if 'register' in request.GET %}
        <div class="alert alert-success alert-dismissible fade show" role="alert"> 
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-check-square-fill" viewBox="0 0 16 16">
            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm10.03 4.97a.75.75 0 0 1 .011 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.75.75 0 0 1 1.08-.022z"/>
          </svg>
          USUARIO REGISTRADO CORRECTAMENTE. YA PUEDES INGRESAR 
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>  
        </div>
      </div>            
      {% endif %}
        <form action="" method="post">{% csrf_token %}
          <h3 class="mb-4" id="titulo_login">Iniciar sesión</h3>
          {% if form.non_field_errors %}<!--MOSTRAR SI EXISTE UN TIPO DE ERROR-->
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg>  
            su usuario o contraseña son incorrectos, prueba de nuevo
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>  
          </div>
        </div>
        {% endif %}
          <p class="input_login">
            <input type="text" name="username" autofocus maxlength="254" required
              id="id_username" class="form-control" placeholder="Nombre de usuario"/>
          </p>
          <p>
            <input type="password" name="password" required
              id="id_password" class="form-control" placeholder="Contraseña"/>
          </p>
          <p><input type="submit" class="btn btn-primary btn-block" value="Acceder"></p>
          <footer class="footer-card footer-card-signup">
            <a href="{% url 'signup'%}" class="boton_regi">No tengo cuenta</a>
          </footer>
        </form>
      </div>
    </div>
  </div>
</main>

<style>
  .close{
    display: none;
  }
</style>

<script>
  const alert = document.querySelector(".alert");
  const btn = document.querySelector(".btn-close")
  btn.addEventListener("click", () => {
    alert.classList.add("close");
  });
</script>
{% endblock %}